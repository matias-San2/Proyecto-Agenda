<!DOCTYPE html>
<html lang="<%= lng || lang || 'es' %>">
<head>
    <meta charset="UTF-8">
    <title><%= t('tenant_deletion.title', 'Empresa eliminada exitosamente') %></title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f8f9fa;
        }
        .card-success {
            border-left: 6px solid #28a745;
            position: relative;
            overflow: hidden;
        }
        .card-success::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(40, 167, 69, 0.08);
            transform: skewX(-20deg);
            animation: slideGlow 2.5s infinite;
        }
        .icon-big {
            font-size: 4rem;
            color: #28a745;
            animation: pop 0.8s ease-in-out;
        }
        @keyframes pop {
            0% { transform: scale(0); opacity: 0; }
            60% { transform: scale(1.15); opacity: 1; }
            100% { transform: scale(1); }
        }
        @keyframes slideGlow {
            0% { left: -100%; }
            60% { left: 100%; }
            100% { left: 100%; }
        }
        .btn-home {
            font-weight: 600;
            padding: 10px 22px;
        }
        .countdown {
            font-size: 1.1rem;
            font-weight: 600;
            color: #dc3545;
        }
    </style>
</head>

<body>
    <!-- NAVBAR opcional, si quieres ocultarla quítala -->
    <% include ./navbar %>

    <div class="container my-5 pt-4">
        <div class="row justify-content-center">
            <div class="col-md-8">

                <div class="card shadow-sm card-success p-4 text-center">
                    <div class="icon-big mb-3">
                        <i class="fas fa-check-circle"></i>
                    </div>

                    <h2 class="fw-bold mb-3"><%= t('tenant_deletion.title', 'Empresa eliminada exitosamente') %></h2>

                    <p class="lead">
                        <%= t('tenant_deletion.lead', 'Toda la información asociada al tenant fue eliminada correctamente:') %>
                    </p>

                    <ul class="list-group text-start mb-4">
                        <li class="list-group-item">✓ <%= t('tenant_deletion.items.users', 'Usuarios removidos del sistema') %></li>
                        <li class="list-group-item">✓ <%= t('tenant_deletion.items.roles', 'Roles y permisos eliminados') %></li>
                        <li class="list-group-item">✓ <%= t('tenant_deletion.items.personalization', 'Parámetros de personalización borrados') %></li>
                        <li class="list-group-item">✓ <%= t('tenant_deletion.items.branding', 'Archivos de branding eliminados de S3') %></li>
                        <li class="list-group-item">✓ <%= t('tenant_deletion.items.catalog', 'Registros del catálogo asociados eliminados') %></li>
                    </ul>

                    <div class="countdown mb-3">
                        <span id="countdownMessage"><%= t('tenant_deletion.redirecting', 'Redirigiendo en {{seconds}} segundos…', { seconds: 5 }) %></span>
                    </div>

                    <a href="/logout" class="btn btn-primary btn-home">
                        <%= t('tenant_deletion.button', 'Ir al inicio de sesión') %>
                    </a>
                </div>

            </div>
        </div>
    </div>

    <% include ./footer %>

    <!-- JS Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a2e0e6ad65.js" crossorigin="anonymous"></script>
    <script>
      (function () {
        const countdownMsgEl = document.getElementById('countdownMessage');
        const redirectTemplate = "<%= t('tenant_deletion.redirecting', 'Redirigiendo en {{seconds}} segundos…') %>";
        let counter = 5;

        const intervalId = setInterval(() => {
          counter -= 1;
          if (countdownMsgEl) countdownMsgEl.textContent = redirectTemplate.replace('{{seconds}}', counter);

          if (counter <= 0) {
            clearInterval(intervalId);
            window.location.href = '/logout';
          }
        }, 1000);
      })();
    </script>
</body>
</html>
